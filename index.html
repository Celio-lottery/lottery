const container = document.getElementById("lottery-results");
const proxy = "https://twlotto-proxy.pages.dev/";
const sources = [
  { name: "大樂透", url: "lotto649" },
  { name: "威力彩", url: "superlotto638" },
  { name: "今彩539", url: "daily539" },
  { name: "3星彩", url: "3star" },
  { name: "4星彩", url: "4star" },
];

container.innerHTML = "";

sources.forEach(item => {
  fetch(proxy + item.url)
    .then(res => res.json())
    .then(data => {
      const div = document.createElement("div");
      div.className = "lottery";
      div.innerHTML = `
        <h2>${item.name}</h2>
        <p><strong>期別：</strong>${data.issue}</p>
        <p><strong>開獎日：</strong>${data.date}</p>
        <p><strong>號碼：</strong>${data.numbers}</p>
        ${data.special ? `<p><strong>特別號：</strong>${data.special}</p>` : ""}
      `;
      container.appendChild(div);
    })
    .catch(err => {
      const div = document.createElement("div");
      div.className = "lottery";
      div.innerHTML = `<h2>${item.name}</h2><p class="error">⚠️ 無法取得資料</p>`;
      container.appendChild(div);
    });
});
